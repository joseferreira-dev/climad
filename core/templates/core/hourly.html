{% extends "core/base.html" %}
{% load static %}

{% block content %}
<div class="container">
    <h2>Análise de Dados Horários</h2>
    <p class="subtitle page-description">Selecione a localização, período e as variáveis climáticas desejadas.</p>
    
    <form id="hourly-analysis-form" class="climad-form">
        {% csrf_token %}
        <fieldset class="form-section">
            <legend>Localização e Período</legend>
            <div class="map-search-wrapper"><input type="text" id="map-search-input" placeholder="Pesquisar local ou endereço no mapa..."><button type="button" id="map-search-button" class="button-secondary">Pesquisar</button></div>
            <div id="map"></div>
            <div class="form-grid"><div class="input-pair"><div class="form-group"><label for="latitude-input">Latitude</label><input type="text" id="latitude-input" name="latitude" required></div><div class="form-group"><label for="longitude-input">Longitude</label><input type="text" id="longitude-input" name="longitude" required></div></div><div class="input-pair"><div class="form-group"><label for="start-date-input">Data de Início</label><input type="date" id="start-date-input" name="start_date" required></div><div class="form-group"><label for="end-date-input">Data de Fim</label><input type="date" id="end-date-input" name="end_date" required></div></div></div>
        </fieldset>
        <fieldset class="form-section">
            <legend>Variáveis Climáticas</legend>
            <div class="checkbox-grid">
                <label><input type="checkbox" name="parameters" value="T2M"> Temperatura</label>
                <label><input type="checkbox" name="parameters" value="RH2M"> Umidade</label>
                <label><input type="checkbox" name="parameters" value="WS10M"> Vento</label>
                <label><input type="checkbox" name="parameters" value="PS"> Pressão</label>
            </div>
        </fieldset>
        <button type="submit" class="submit-button">Buscar Dados Horários</button>
        <div class="form-error" style="display: none;"></div>
    </form>
    
    <div class="results" style="display: none;">
        <h2>Resultados da Análise</h2>
        <div style="overflow-x:auto;"><table id="climate-table" class="display compact stripe hover" style="width:100%"></table></div>
        <div id="charts-container-apex" class="charts-wrapper-apex"></div>
    </div>
</div>
{% endblock %}