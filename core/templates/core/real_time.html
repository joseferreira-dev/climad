{% extends "core/base.html" %}
{% load static %}

{% block content %}
<div class="container">
    <h2>Análise em Tempo Real</h2>
    <p class="subtitle page-description">Selecione uma localização no mapa para ver as condições meteorológicas atuais.</p>
    <p class="page-description-source">Fonte dos dados: <a href="https://openweathermap.org/">OpenWeather</a></p>

    <form id="real-time-analysis-form" class="climad-form">
        {% csrf_token %}
        <fieldset class="form-section">
            <legend>Localização</legend>
            <div class="map-search-wrapper">
                <input type="text" id="map-search-input" placeholder="Pesquisar local ou endereço no mapa...">
                <button type="button" id="map-search-button" class="button-secondary">Pesquisar</button>
            </div>
            <div id="map"></div>
            <div class="form-grid" style="margin-top: 1em;">
                <div class="input-pair">
                    <div class="form-group">
                        <label for="latitude-input">Latitude</label>
                        <input type="text" id="latitude-input" name="latitude" required>
                    </div>
                    <div class="form-group">
                        <label for="longitude-input">Longitude</label>
                        <input type="text" id="longitude-input" name="longitude" required>
                    </div>
                </div>
            </div>
        </fieldset>

        <div class="g-recaptcha" data-sitekey="{{ RECAPTCHA_SITE_KEY }}"></div>

        <button type="submit" class="submit-button">Buscar Dados Atuais</button>
        <div class="form-error" style="display: none;"></div>
    </form>
    
    <div class="results" style="display: none;">
        </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
{% endblock %}